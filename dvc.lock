schema: '2.0'
stages:
  preprocess_mnist:
    cmd: python src/preprocess.py
    deps:
    - path: src/preprocess.py
      md5: 3189a5aacb3cd02ceb70508a31d43b29
      size: 1645
    outs:
    - path: data/data.pickle
      md5: 189b035b9612f4d53293a7be51df3486
      size: 222320349
  train_keras:
    cmd: python src/train_keras.py
    deps:
    - path: data/data.pickle
      md5: 189b035b9612f4d53293a7be51df3486
      size: 222320349
    - path: src/train_keras.py
      md5: 9ef96cba1e1e3c0de3a27014b4375854
      size: 1905
    outs:
    - path: models/mnist_model_5.h5
      md5: 8cd5424dfd8e488ffa6703e63f3b6717
      size: 28614592
  evaluate_keras:
    cmd: python src/evaluate.py
    deps:
    - path: src/evaluate.py
      md5: f4237bfff88c1c30a91cefb2eea53442
      size: 1002
    outs:
    - path: reports/scores.json
      md5: dc589ca1e2046f734faa4b9f2076f938
      size: 52
  train_tree:
    cmd: python src/train_forest.py
    deps:
    - path: data/data.pickle
      md5: 189b035b9612f4d53293a7be51df3486
      size: 222320349
    - path: src/train_forest.py
      md5: 1e1aace24784a9fe58d4f5abd3940890
      size: 715
    outs:
    - path: models/random_forest_500.joblib
      md5: 38e968db772d7962d855ab9a13680fb6
      size: 1080848906
  evaluate_tree:
    cmd: python src/evaluate.py models/random_forest_500.joblib
    deps:
    - path: models/random_forest_500.joblib
      md5: 38e968db772d7962d855ab9a13680fb6
      size: 1080848906
    - path: src/evaluate.py
      md5: df71479d21934775b6c22dcc43f28c2e
      size: 1875
  evaluate:
    cmd: python src/evaluate.py models/
    deps:
    - path: models/
      md5: b1d94d11b6119a204b35099f1d91ac5a.dir
      size: 1109463498
      nfiles: 2
    - path: src/evaluate.py
      md5: 45c483cfd4bdbca68e79c180a1f92ce9
      size: 2052
    outs:
    - path: reports/scores.json
      md5: 51e90951686646e55c4f72667f6f2dff
      size: 70
